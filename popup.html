<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Tracking Languages</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <main class="popup">

    <!-- Dashboard view (default) -->
    <div id="dashboard-view">
      <header class="header">
        <h1>Tracking Languages</h1>
        <div class="header-actions">
          <button id="channel-map-btn" class="icon-btn" title="Set current channel language">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6a2 2 0 0 1 2-2h6l3 3h5a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-6l-3-3H5a2 2 0 0 1-2-2V6z"/>
              <path d="M9 11h6"/>
            </svg>
          </button>
          <button id="settings-btn" class="icon-btn" title="Settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
          </button>
        </div>
      </header>

      <section id="progress-section">
        <div id="ring-container">
          <svg id="progress-ring" width="120" height="120" viewBox="0 0 120 120">
            <circle class="ring-bg" cx="60" cy="60" r="52" fill="none" stroke="#1a1d24" stroke-width="8"/>
            <circle id="ring-progress" cx="60" cy="60" r="52" fill="none" stroke="#6366f1" stroke-width="8"
              stroke-linecap="round" transform="rotate(-90 60 60)"
              stroke-dasharray="326.73" stroke-dashoffset="326.73"/>
          </svg>
          <div id="ring-segments" class="hidden" aria-hidden="true"></div>
          <div id="ring-text">
            <span id="ring-time">0m</span>
            <span id="ring-goal">/ 30m</span>
          </div>
        </div>
        <div id="ring-language-circles" class="hidden"></div>
        <div id="streak-info">
          <span id="streak-count">0</span>
          <span id="streak-label">day streak</span>
        </div>
      </section>

      <section id="history-section">
        <div class="section-header">
          <div class="history-actions">
            <button id="videos-btn" class="action-btn action-btn-inline">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="23 7 16 12 23 17 23 7"/>
                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
              </svg>
              Videos
            </button>
            <button id="calendar-btn" class="icon-btn" title="Calendar view">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
            </button>
          </div>
        </div>
        <div id="calendar-section" class="hidden">
          <div class="calendar-nav">
            <button id="cal-prev" class="icon-btn">&lt;</button>
            <span id="cal-month-year"></span>
            <button id="cal-next" class="icon-btn">&gt;</button>
          </div>
          <div class="calendar-weekdays">
            <span>S</span><span>M</span><span>T</span><span>W</span><span>T</span><span>F</span><span>S</span>
          </div>
          <div id="calendar-grid"></div>
        </div>
      </section>
      <p class="status status-dashboard" id="dashboard-status" role="status" aria-live="polite"></p>
    </div>

    <!-- Video log view -->
    <div id="video-log-view" class="hidden">
      <div class="view-header">
        <button id="videos-back-btn" class="icon-btn">&lt;</button>
        <h2>Video Log</h2>
        <input type="date" id="video-log-date" />
      </div>
      <div id="video-log-list"></div>
      <p id="video-log-empty" class="empty-msg hidden">No videos recorded</p>
    </div>

    <!-- Settings view -->
    <div id="settings-view" class="hidden">
      <div class="view-header">
        <button id="settings-back-btn" class="icon-btn">&lt;</button>
        <h2>Settings</h2>
      </div>

      <section class="card">
        <label class="toggle-row" for="trackingEnabled">
          <span class="toggle-label">Enable tracking</span>
          <input type="checkbox" id="trackingEnabled" class="toggle" checked />
        </label>
      </section>

      <section class="card">
        <label class="toggle-row" for="dailyGoal">
          <span class="toggle-label">Daily goal</span>
          <div class="goal-input">
            <input type="number" id="dailyGoal" min="5" max="480" step="5" value="30" />
            <span class="goal-unit">min</span>
          </div>
        </label>
      </section>

      <section class="card">
        <label class="toggle-row" for="progressRingMode">
          <span class="toggle-label">Progress ring</span>
          <div class="mode-input">
            <select id="progressRingMode">
              <option value="total">Total</option>
              <option value="split">Per-language circles</option>
            </select>
          </div>
        </label>
      </section>

      <section class="card">
        <label class="toggle-row" for="showTotalInSplitRing">
          <span class="toggle-label">Show total in per-language mode</span>
          <input type="checkbox" id="showTotalInSplitRing" class="toggle" />
        </label>
      </section>

      <section class="card">
        <label class="toggle-row" for="showStreakCounter">
          <span class="toggle-label">Show day streak</span>
          <input type="checkbox" id="showStreakCounter" class="toggle" />
        </label>
      </section>

      <section class="card" id="targetLangCard">
        <p class="card-title">Target languages</p>
        <p class="card-hint">Languages you're learning</p>
        <div class="language-options" id="targetLanguages"></div>
      </section>

      <p class="status" id="status" role="status" aria-live="polite"></p>
    </div>

  </main>
  <script src="popup.js"></script>
</body>
</html>
